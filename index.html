<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>Rabika's Burguer</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700;800;900&display=swap" rel="stylesheet">

<style>
*{box-sizing:border-box;margin:0;padding:0}

body{
  font-family:'Poppins',sans-serif;
  background:linear-gradient(180deg,#06003a,#0a045a,#03001f);
  color:#fff;
  display:flex;
  justify-content:center;
  min-height:100vh;
}

/* SPLASH */
#splash{
  position:fixed;
  inset:0;
  background:linear-gradient(180deg,#05002e,#020018);
  display:flex;
  align-items:center;
  justify-content:center;
  z-index:9999;
}
.splash-box{
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  width:100%;
  height:100%;
  padding:24px;
  text-align:center;
}
.splash-logo{
  width:78vw;
  max-width:360px;
  max-height:42vh;
  object-fit:contain;
  margin-bottom:26px;
}
.splash-btn{
  background:linear-gradient(135deg,#FFD34D,#FFB000);
  border:none;
  padding:18px 56px;
  border-radius:48px;
  font-size:20px;
  font-weight:900;
  color:#2b0033;
  cursor:pointer;
}

/* APP */
#app{
  width:100%;
  max-width:460px;
  padding:14px 14px 340px;
  display:none;
}
.title{
  text-align:center;
  font-size:30px;
  font-weight:900;
  color:#FFD34D;
  margin-bottom:6px;
}
#closedBanner{
  display:none;
  background:#b00020;
  padding:10px;
  border-radius:0 0 18px 18px;
  font-size:13px;
  font-weight:700;
  text-align:center;
  margin-bottom:10px;
}
.search{
  width:100%;
  padding:14px;
  border-radius:22px;
  border:none;
  font-size:15px;
  margin-bottom:10px;
}

/* TABS */
.tabs{
  display:grid;
  grid-template-columns:repeat(3,1fr);
  gap:10px;
  margin-bottom:14px;
}
@media(min-width:480px){
  .tabs{grid-template-columns:repeat(5,1fr)}
}
.tab{
  background:#fff;
  color:#2b0033;
  padding:12px;
  border-radius:20px;
  font-weight:800;
  text-align:center;
  cursor:pointer;
  font-size:14px;
}
.tab.active{background:#FFD34D}

/* CONTENT */
.box{
  background:#fff;
  color:#2b0033;
  border-radius:28px;
  padding:18px;
  margin-bottom:20px;
  display:none;
}
.box.active{display:block}
.section{
  font-weight:900;
  color:#5a0070;
  margin:18px 0 10px;
  font-size:14px;
}
.item{
  display:grid;
  grid-template-columns:1fr auto auto;
  gap:10px;
  padding:12px 0;
  border-bottom:1px dashed #e3e3e3;
  align-items:center;
}
.item:last-child{border:none}
.item-name{font-weight:600;font-size:14px}
.item-price{font-weight:900;color:#5a0070}
.old-price{text-decoration:line-through;color:#999;font-size:12px}
.offer{color:#b00020;font-size:13px;font-weight:900}
.btn-add{
  background:#5a0070;
  color:#fff;
  border:none;
  border-radius:14px;
  padding:6px 14px;
  font-weight:900;
  cursor:pointer;
}

/* CART */
#cart{
  position:fixed;
  bottom:0;
  left:50%;
  transform:translateX(-50%);
  width:100%;
  max-width:460px;
  background:#fff;
  color:#2b0033;
  padding:16px;
  border-radius:28px 28px 0 0;
  display:none;
}
.cart-item{
  display:grid;
  grid-template-columns:1fr auto auto;
  gap:8px;
  padding:6px 0;
  font-size:13px;
}
.qty{display:flex;gap:6px}
.qty button{
  background:#FFD34D;
  border:none;
  border-radius:10px;
  padding:2px 10px;
  font-weight:900;
}
.delivery{
  display:flex;
  justify-content:space-around;
  margin:12px 0;
  font-weight:700;
}
.input,.select{
  width:100%;
  padding:12px;
  border-radius:18px;
  border:1px solid #ccc;
  margin-top:8px;
}
.total{
  text-align:right;
  font-size:18px;
  font-weight:900;
  margin-top:8px;
}
.finish{
  background:#25D366;
  color:#fff;
  padding:16px;
  border-radius:24px;
  font-weight:900;
  margin-top:12px;
  text-align:center;
  cursor:pointer;
}

/* ADMIN */
.modal{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.6);
  display:none;
  align-items:center;
  justify-content:center;
  z-index:9999;
}
.admin-box{
  background:#fff;
  color:#2b0033;
  width:92%;
  max-width:420px;
  border-radius:26px;
  padding:20px;
  max-height:80vh;
  overflow-y:auto;
}
.admin-row{
  display:grid;
  grid-template-columns:1fr 90px 130px auto;
  gap:6px;
  margin-bottom:10px;
  align-items:center;
  cursor:pointer;
}
.admin-row.active-admin{
  border:2px solid #25D366;
  background:#eafff2;
}
.admin-row input{
  padding:8px;
  border-radius:10px;
  border:1px solid #ccc;
}
.admin-remove{
  background:#e60000;
  color:#fff;
  border:none;
  border-radius:10px;
  padding:6px 10px;
  font-weight:800;
  cursor:pointer;
}
</style>
</head>
<body>

<!-- SPLASH -->
<div id="splash">
  <div class="splash-box">
    <img src="logo.png" class="splash-logo" alt="Rabika's Burguer">
    <button class="splash-btn" onclick="start()">FAZER PEDIDO</button>
  </div>
</div>

<!-- APP -->
<div id="app">

  <div class="title">Rabika's Burguer</div>

  <div id="closedBanner">
    üî¥ Estamos fechados ‚Äî Ter√ßa a Domingo das 18:30 √†s 22:30
  </div>

  <input
    class="search"
    id="search"
    placeholder="Pesquisar no card√°pio..."
    oninput="handleSearch(this.value)"
  >

  <!-- TABS -->
  <div class="tabs">
    <div class="tab active" onclick="openTab('lanches',this)">üçî Lanches</div>
    <div class="tab" onclick="openTab('porcoes',this)">üçü Por√ß√µes</div>
    <div class="tab" onclick="openTab('pasteis',this)">ü•ü Past√©is</div>
    <div class="tab" onclick="openTab('acai',this)">üç® A√ßa√≠</div>
    <div class="tab" onclick="openTab('bebidas',this)">ü•§ Bebidas</div>
  </div>

  <!-- CONTE√öDO -->
  <div id="lanches" class="box active"></div>
  <div id="porcoes" class="box"></div>
  <div id="pasteis" class="box"></div>
  <div id="acai" class="box"></div>
  <div id="bebidas" class="box"></div>

</div>

<!-- CARRINHO -->
<div id="cart">

  <div id="cartItems"></div>

  <div class="delivery">
    <label>
      <input type="radio" name="del" checked onchange="setDelivery(false)">
      Retirada
    </label>
    <label>
      <input type="radio" name="del" onchange="setDelivery(true)">
      Entrega (+R$8)
    </label>
  </div>

  <input class="input" id="name" placeholder="Seu nome">
  <input class="input" id="address" placeholder="Endere√ßo" style="display:none">

  <select class="select" id="payment">
    <option value="">Forma de pagamento</option>
    <option>Dinheiro</option>
    <option>Pix</option>
    <option>Cart√£o</option>
  </select>

  <div class="total" id="total">Total: R$ 0,00</div>

  <div class="finish" onclick="sendOrder()">Finalizar Pedido</div>

</div>

<!-- PAINEL ADMIN -->
<div id="adminModal" class="modal">
  <div class="admin-box">
    <h3>Painel de Ofertas</h3>
    <p style="font-size:13px;margin-bottom:10px">
      Defina um pre√ßo promocional e a data final da oferta.
    </p>
    <div id="adminList"></div>
    <div class="finish" onclick="closeAdmin()">Fechar</div>
  </div>
</div>
<script>
/* ================= CONFIG ================= */
const FREIGHT = 8;
const ADMIN_PASS = 'adm';

let isDelivery = false;
let cart = [];
let offers = JSON.parse(localStorage.getItem('offers')) || {};

/* ================= HOR√ÅRIO ================= */
function isOpen(){
  const d = new Date();
  const day = d.getDay(); // 0 dom, 1 seg...
  const h = d.getHours() + d.getMinutes()/60;
  if(day === 1) return false;               // segunda fechado
  if(h < 18.5 || h > 22.5) return false;    // 18:30 √†s 22:30
  return true;
}

/* ================= START ================= */
function start(){
  document.getElementById('splash').style.display = 'none';
  document.getElementById('app').style.display = 'block';
  renderAll();
  document.getElementById('closedBanner').style.display = isOpen() ? 'none' : 'block';
}

/* ================= TABS ================= */
function openTab(id, el){
  document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
  el.classList.add('active');

  document.querySelectorAll('.box').forEach(b => b.classList.remove('active'));
  document.getElementById(id).classList.add('active');

  // limpa busca ao trocar de aba
  document.getElementById('search').value = '';
}

/* ================= SEARCH (CORRIGIDA) ================= */
function handleSearch(v){
  v = v.toLowerCase().trim();

  // acesso ao painel ADM
  if(v === 'oferta'){
    const p = prompt('Senha ADM');
    if(p === ADMIN_PASS) openAdmin();
    document.getElementById('search').value = '';
    return;
  }

  const box = document.querySelector('.box.active');
  if(!box) return;

  box.querySelectorAll('.item').forEach(i => {
    const name = i.dataset.name;
    i.style.display = name.includes(v) ? 'grid' : 'none';
  });
}

/* ================= PRODUTOS ================= */
const products = {
  lanches: [
    {id:'L01',n:'X-Salada',p:17},{id:'L02',n:'X-Burguer',p:14},
    {id:'L03',n:'X-Frango',p:22},{id:'L04',n:'X-Frango Cremoso',p:20},
    {id:'L05',n:'X-Bacon',p:25},{id:'L06',n:'X-Calabresa',p:25},
    {id:'L07',n:'X-Cora√ß√£o',p:27},{id:'L08',n:'X-Tudo',p:32},
    {id:'L09',n:'X-Burguer Duplo',p:22},{id:'L10',n:'X-Egg',p:20},
    {id:'L11',n:'X-Tribom',p:32},{id:'L12',n:'X-Da Casa',p:45},
    {id:'L13',n:'X-Dog',p:20}
  ],
  adicionaisLanches: [
    {id:'AL01',n:'Calabresa',p:7},{id:'AL02',n:'Bacon',p:7},
    {id:'AL03',n:'Cora√ß√£o',p:8},{id:'AL04',n:'Ovo',p:3},
    {id:'AL05',n:'Salsicha',p:4},{id:'AL06',n:'Frango',p:7},
    {id:'AL07',n:'Cheddar',p:4},{id:'AL08',n:'Hamb√∫rguer artesanal',p:10},
    {id:'AL09',n:'Maionese caseira',p:2}
  ],
  porcoes: [
    {id:'P01',n:'Fritas',p:24.99},{id:'P02',n:'Fritas c/ Frango',p:39.99},
    {id:'P03',n:'Fritas c/ Calabresa',p:34.99},{id:'P04',n:'Fritas c/ Bacon',p:34.99},
    {id:'P05',n:'An√©is de Cebola',p:24.99},
    {id:'P06',n:'Fritas c/ Bacon, Calabresa e Queijo',p:39.99},
    {id:'P07',n:'Fritas c/ Bacon Cheddar',p:39.99},
    {id:'P08',n:'Fritas c/ Polenta e Frango',p:39.99},
    {id:'P09',n:'Fritas c/ Polenta',p:24.99},
    {id:'P10',n:'Fritas c/ Calabresa e Catupiry',p:35.99},
    {id:'P11',n:'Fritas, Polenta, Chuleta e Anel de Cebola',p:49.99}
  ],
  pasteis: [
    {id:'PA01',n:'Pastel de Carne',p:14},{id:'PA02',n:'Pastel de Frango',p:12},
    {id:'PA03',n:'Frango Bacon Cheddar',p:16},{id:'PA04',n:'Bacon Cheddar',p:15},
    {id:'PA05',n:'Calabresa c/ Cebola',p:14},{id:'PA06',n:'Carne e Queijo',p:15},
    {id:'PA07',n:'Queijo',p:14},{id:'PA08',n:'Chocolate ao Leite',p:15},
    {id:'PA09',n:'Banana Queijo Canela',p:15},{id:'PA10',n:'Romeu e Julieta',p:15},
    {id:'PA11',n:'Chocolate Branco',p:15},{id:'PA12',n:'Creme e Ouro Branco',p:15},
    {id:'PA13',n:'Creme e Sonho de Valsa',p:15}
  ],
  acaiTamanhos: [
    {id:'A01',n:'A√ßa√≠ 300ml',p:12},{id:'A02',n:'A√ßa√≠ 400ml',p:15},
    {id:'A03',n:'A√ßa√≠ 500ml',p:18}
  ],
  acaiAdicionais: [
    {id:'AA01',n:'Pa√ßoca',p:2},{id:'AA02',n:'Leite em p√≥',p:4},
    {id:'AA03',n:'Granola',p:4},{id:'AA04',n:'Morango',p:4},
    {id:'AA05',n:'M&M',p:3},{id:'AA06',n:'Ouro Branco',p:3},
    {id:'AA07',n:'Banana',p:2},{id:'AA08',n:'Sonho de Valsa',p:3},
    {id:'AA09',n:'Leite Condensado',p:3},{id:'AA10',n:'Nutella',p:4}
  ],
  bebidas: [
    {id:'B01',n:'Cassulinha 200ml',p:3},{id:'B02',n:'Coca-Cola 600ml',p:8},
    {id:'B03',n:'Coca-Cola 2L',p:16},{id:'B04',n:'Refri Lata',p:6},
    {id:'B05',n:'Refrigerante 2L',p:12},{id:'B06',n:'Cerveja Lata 350ml',p:6},
    {id:'B07',n:'Achocolatado 200ml',p:3}
  ]
};

/* ================= RENDER ================= */
function renderAll(){
  renderCategory('lanches', products.lanches, products.adicionaisLanches);
  renderCategory('porcoes', products.porcoes);
  renderCategory('pasteis', products.pasteis);
  renderAcai();
  renderCategory('bebidas', products.bebidas);
}

function renderCategory(id, list, extra){
  const box = document.getElementById(id);
  box.innerHTML = '';
  list.forEach(p => box.innerHTML += itemHTML(p));
  if(extra){
    box.innerHTML += '<div class="section">‚ûï Adicionais</div>';
    extra.forEach(p => box.innerHTML += itemHTML(p));
  }
}

function renderAcai(){
  const box = document.getElementById('acai');
  box.innerHTML = '<div class="section">ü•§ Tamanhos</div>';
  products.acaiTamanhos.forEach(p => box.innerHTML += itemHTML(p));
  box.innerHTML += '<div class="section">üç´ Adicionais</div>';
  products.acaiAdicionais.forEach(p => box.innerHTML += itemHTML(p));
}

function getPrice(p){
  const o = offers[p.n];
  if(o && new Date(o.until) >= new Date()) return o.price;
  return p.p;
}

function itemHTML(p){
  const o = offers[p.n];
  const price = getPrice(p);
  return `
  <div class="item" data-name="${p.n.toLowerCase()}">
    <span class="item-name">
      <small style="color:#999;font-weight:700">#${p.id}</small><br>
      ${p.n}
      ${o ? `<br><span class="offer">üî• Oferta at√© ${o.until}</span>
      <br><span class="old-price">R$ ${p.p.toFixed(2).replace('.',',')}</span>` : ''}
    </span>
    <span class="item-price">R$ ${price.toFixed(2).replace('.',',')}</span>
    <button class="btn-add" onclick="addItem('${p.id}','${p.n}',${price})">+</button>
  </div>`;
}

/* ================= CARRINHO ================= */
function addItem(id, n, p){
  cart.push({id, n, p, q:1});
  updateCart();
}

function updateCart(){
  const box = document.getElementById('cartItems');
  box.innerHTML = '';
  let total = 0;

  cart.forEach((i, idx) => {
    total += i.p * i.q;
    box.innerHTML += `
    <div class="cart-item">
      <span>${i.n} <small>#${i.id}</small> x${i.q}</span>
      <div class="qty">
        <button onclick="chg(${idx},-1)">-</button>
        <button onclick="chg(${idx},1)">+</button>
      </div>
    </div>`;
  });

  if(isDelivery) total += FREIGHT;
  document.getElementById('total').innerText =
    'Total: R$ ' + total.toFixed(2).replace('.',',');

  document.getElementById('cart').style.display =
    cart.length ? 'block' : 'none';
}

function chg(i, v){
  cart[i].q += v;
  if(cart[i].q <= 0) cart.splice(i,1);
  updateCart();
}

function setDelivery(v){
  isDelivery = v;
  document.getElementById('address').style.display = v ? 'block' : 'none';
  updateCart();
}

/* ================= ADMIN ================= */
function openAdmin(){
  document.getElementById('adminModal').style.display = 'flex';
  renderAdmin();
}

function closeAdmin(){
  document.getElementById('adminModal').style.display = 'none';
}

function renderAdmin(){
  const box = document.getElementById('adminList');
  box.innerHTML = '';

  Object.values(products).flat().forEach(p => {
    const active = offers[p.n] ? 'active-admin' : '';
    box.innerHTML += `
    <div class="admin-row ${active}">
      <input value="${p.id} - ${p.n}" disabled>
      <input type="number" step="0.01" placeholder="Pre√ßo oferta">
      <input type="date"
        onchange="setOffer('${p.n}', this.parentNode.children[1].value, this.value)">
      <button class="admin-remove" onclick="removeOffer('${p.n}')">X</button>
    </div>`;
  });
}

function setOffer(name, price, until){
  if(!price || !until) return;
  offers[name] = {price:parseFloat(price), until};
  localStorage.setItem('offers', JSON.stringify(offers));
  renderAll();
  renderAdmin();
}

function removeOffer(name){
  delete offers[name];
  localStorage.setItem('offers', JSON.stringify(offers));
  renderAll();
  renderAdmin();
}

/* ================= FINALIZAR ================= */
function sendOrder(){
  let msg = 'Pedido Rabika\\n';
  cart.forEach(i => {
    msg += `- ${i.n} (#${i.id}) x${i.q}\\n`;
  });
  if(isDelivery) msg += 'Entrega +R$8\\n';
  msg += document.getElementById('total').innerText;
  window.open(
    'https://wa.me/554991789706?text=' + encodeURIComponent(msg)
  );
}
</script>

</body>
</html>
