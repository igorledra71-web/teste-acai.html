<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">

<meta name="viewport"
content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

<title>Rabika's Burguer</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700;800;900&display=swap" rel="stylesheet">

<style>
*{
  box-sizing:border-box;
  margin:0;
  padding:0;
}

body{
  font-family:'Poppins',sans-serif;
  background:linear-gradient(180deg,#06003a,#0a045a,#03001f);
  color:#fff;
  display:flex;
  justify-content:center;
  min-height:100vh;
}

/* SPLASH */
#splash{
  position:fixed;
  inset:0;
  background:linear-gradient(180deg,#05002e,#020018);
  display:flex;
  align-items:center;
  justify-content:center;
  z-index:9999;
}
.splash-box{
  display:flex;
  flex-direction:column;
  align-items:center;
  text-align:center;
}
.splash-logo{
  width:85vw;
  max-width:380px;
  margin-bottom:24px;
}
.splash-btn{
  background:#FFD34D;
  border:none;
  padding:18px 60px;
  border-radius:50px;
  font-size:20px;
  font-weight:900;
  color:#2b0033;
}

/* APP */
#app{
  width:100%;
  max-width:480px;
  padding:14px 14px 360px;
  display:none;
  flex-direction:column;
}

/* HEADER */
.title{
  text-align:center;
  font-size:30px;
  font-weight:900;
  color:#FFD34D;
  margin-bottom:6px;
}

#closedBanner{
  display:none;
  background:#b00020;
  color:#fff;
  text-align:center;
  padding:10px;
  border-radius:16px;
  font-size:13px;
  font-weight:700;
  margin-bottom:10px;
}

/* SEARCH */
.search{
  width:100%;
  padding:14px 18px;
  border-radius:24px;
  border:none;
  font-size:16px;
  margin-bottom:12px;
}

/* TABS */
.tabs{
  display:grid;
  grid-template-columns:repeat(3,1fr);
  gap:10px;
  margin-bottom:14px;
}
@media(min-width:480px){
  .tabs{grid-template-columns:repeat(5,1fr)}
}
.tab{
  background:#fff;
  color:#2b0033;
  border-radius:22px;
  padding:12px;
  text-align:center;
  font-weight:800;
  cursor:pointer;
}
.tab.active{background:#FFD34D}

/* CONTENT */
.box{
  background:#fff;
  color:#2b0033;
  border-radius:30px;
  padding:18px;
  display:none;
}
.box.active{display:block}

.section{
  text-align:center;
  font-weight:900;
  color:#5a0070;
  margin:18px 0 12px;
}

.item{
  display:grid;
  grid-template-columns:1fr auto auto;
  align-items:center;
  gap:10px;
  padding:14px 0;
  border-bottom:1px dashed #e3e3e3;
}
.item:last-child{border:none}

.item-name{
  font-weight:600;
}

.item-price{
  font-weight:900;
  color:#5a0070;
  white-space:nowrap;
}

.old{
  text-decoration:line-through;
  color:#999;
  font-size:12px;
}

.btn-add{
  background:#5a0070;
  color:#fff;
  border:none;
  border-radius:16px;
  padding:8px 18px;
  font-weight:900;
  min-width:42px;
}

/* CART */
#cart{
  position:fixed;
  bottom:0;
  left:50%;
  transform:translateX(-50%);
  width:100%;
  max-width:480px;
  background:#fff;
  color:#2b0033;
  padding:16px;
  border-radius:30px 30px 0 0;
  display:none;
  z-index:999;
}

.cart-item{
  display:grid;
  grid-template-columns:1fr auto;
  gap:8px;
  font-size:13px;
  margin-bottom:6px;
}

.qty button{
  background:#FFD34D;
  border:none;
  border-radius:10px;
  padding:2px 10px;
  font-weight:900;
}

.delivery{
  display:flex;
  justify-content:space-around;
  margin:12px 0;
}

.input,.select{
  width:100%;
  padding:12px;
  border-radius:18px;
  border:1px solid #ccc;
  font-size:16px;
  margin-top:8px;
}

.total{
  text-align:right;
  font-size:18px;
  font-weight:900;
}

.finish{
  background:#25D366;
  color:#fff;
  padding:16px;
  border-radius:24px;
  font-weight:900;
  margin-top:12px;
  text-align:center;
}

/* MODAL */
.modal{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.6);
  display:none;
  align-items:center;
  justify-content:center;
  z-index:10000;
}

.modal-box{
  background:#fff;
  color:#2b0033;
  width:92%;
  max-width:420px;
  max-height:90vh;
  border-radius:28px;
  padding:20px;
  overflow-y:auto;
}
</style>
</head>
<body>
<!-- SPLASH -->
<div id="splash">
  <div class="splash-box">
    <img src="logo.png" class="splash-logo" alt="Rabika's Burguer">
    <button class="splash-btn" onclick="start()">FAZER PEDIDO</button>
  </div>
</div>

<!-- APP -->
<div id="app">

  <div class="title">Rabika's Burguer</div>

  <div id="closedBanner">
    üî¥ Estamos fechados ‚Äî Ter√ßa a Domingo das 18:30 √†s 22:30
  </div>

  <input
    class="search"
    id="search"
    placeholder="Pesquisar no card√°pio..."
    onkeyup="handleSearch(this.value)"
  >

  <div class="tabs">
    <div class="tab active" onclick="openTab('lanches',this)">üçî Lanches</div>
    <div class="tab" onclick="openTab('porcoes',this)">üçü Por√ß√µes</div>
    <div class="tab" onclick="openTab('pasteis',this)">ü•ü Past√©is</div>
    <div class="tab" onclick="openTab('acai',this)">üç® A√ßa√≠</div>
    <div class="tab" onclick="openTab('bebidas',this)">ü•§ Bebidas</div>
  </div>

  <div id="lanches" class="box active"></div>
  <div id="porcoes" class="box"></div>
  <div id="pasteis" class="box"></div>
  <div id="acai" class="box"></div>
  <div id="bebidas" class="box"></div>

</div>

<!-- CARRINHO -->
<div id="cart">

  <div id="cartItems"></div>

  <div class="delivery">
    <label>
      <input type="radio" name="del" checked onclick="setDelivery(false)">
      Retirada
    </label>
    <label>
      <input type="radio" name="del" onclick="setDelivery(true)">
      Entrega (+R$8)
    </label>
  </div>

  <input class="input" id="name" placeholder="Seu nome">
  <input class="input" id="address" placeholder="Endere√ßo" style="display:none">

  <select class="select" id="payment">
    <option value="">Forma de pagamento</option>
    <option>Dinheiro</option>
    <option>Pix</option>
    <option>Cart√£o</option>
  </select>

  <div class="total" id="total">Total: R$ 0,00</div>

  <div class="finish" onclick="tryFinishOrder()">
    Finalizar Pedido
  </div>

</div>

<!-- MODAL BEBIDA -->
<div id="drinkModal" class="modal">
  <div class="modal-box">
    <h3 style="text-align:center">ü•§ Vai querer bebida?</h3>
    <p style="text-align:center;font-size:14px;margin:10px 0">
      Voc√™ adicionou lanche, mas nenhuma bebida.
    </p>

    <div style="display:flex;gap:10px">
      <button class="finish" onclick="openDrinks()">SIM</button>
      <button class="btn-add" onclick="skipDrinks()">N√ÉO</button>
    </div>
  </div>
</div>

<!-- PAINEL ADM -->
<div id="adminModal" class="modal">
  <div class="modal-box">

    <div class="admin-header">
      <h3>Painel de Ofertas</h3>
      <button class="admin-close" onclick="closeAdmin()">‚úï</button>
    </div>

    <p style="text-align:center;font-size:13px;margin-bottom:10px">
      Defina o pre√ßo promocional e a data final da oferta
    </p>

    <div id="adminList"></div>

  </div>
</div>
<script>
/* ================= CONFIG ================= */
const FREIGHT = 8;
let isDelivery = false;
let cart = [];
let offers = JSON.parse(localStorage.getItem("offers")) || {};
let currentTab = "lanches";

/* ================= HOR√ÅRIO ================= */
function isOpen(){
  const d = new Date();
  const day = d.getDay(); // 1 = segunda
  const h = d.getHours() + d.getMinutes()/60;
  if(day === 1) return false;
  if(h < 18.5 || h > 22.5) return false;
  return true;
}

/* ================= PRODUTOS ================= */
const products = {
  lanches:[
    {n:"X-Salada",p:17},{n:"X-Burguer",p:14},{n:"X-Frango",p:22},
    {n:"X-Frango Cremoso",p:20},{n:"X-Bacon",p:25},{n:"X-Calabresa",p:25},
    {n:"X-Cora√ß√£o",p:27},{n:"X-Tudo",p:32},{n:"X-Burguer Duplo",p:22},
    {n:"X-Egg",p:20},{n:"X-Tribom",p:32},{n:"X-Da Casa",p:45},{n:"X-Dog",p:20}
  ],
  adicionaisLanches:[
    {n:"Calabresa",p:7},{n:"Bacon",p:7},{n:"Cora√ß√£o",p:8},
    {n:"Ovo",p:3},{n:"Salsicha",p:4},{n:"Frango",p:7},
    {n:"Cheddar",p:4},{n:"Hamb√∫rguer artesanal",p:10},{n:"Maionese caseira",p:2}
  ],
  porcoes:[
    {n:"Fritas c/ Frango",p:39.99},{n:"Fritas",p:24.99},
    {n:"Fritas c/ Calabresa",p:34.99},{n:"Fritas c/ Bacon",p:34.99},
    {n:"An√©is de Cebola",p:24.99},
    {n:"Fritas c/ Bacon, Calabresa e Queijo",p:39.99},
    {n:"Fritas c/ Bacon Cheddar",p:39.99},
    {n:"Fritas c/ Polenta e Frango",p:39.99},
    {n:"Fritas c/ Polenta",p:24.99},
    {n:"Fritas c/ Calabresa e Catupiry",p:35.99},
    {n:"Fritas, Polenta, Chuleta e Anel de Cebola",p:49.99}
  ],
  pasteis:[
    {n:"Pastel de Carne",p:14},{n:"Pastel de Frango",p:12},
    {n:"Frango Bacon Cheddar",p:16},{n:"Bacon Cheddar",p:15},
    {n:"Calabresa c/ Cebola",p:14},{n:"Carne e Queijo",p:15},
    {n:"Queijo",p:14},{n:"Chocolate ao Leite",p:15},
    {n:"Banana Queijo Canela",p:15},{n:"Romeu e Julieta",p:15},
    {n:"Chocolate Branco",p:15},{n:"Creme e Ouro Branco",p:15},
    {n:"Creme e Sonho de Valsa",p:15}
  ],
  acaiTamanhos:[
    {n:"A√ßa√≠ 300ml",p:12},{n:"A√ßa√≠ 400ml",p:15},{n:"A√ßa√≠ 500ml",p:18}
  ],
  acaiAdicionais:[
    {n:"Pa√ßoca",p:2},{n:"Leite em p√≥",p:4},{n:"Granola",p:4},
    {n:"Morango",p:4},{n:"M&M",p:3},{n:"Ouro Branco",p:3},
    {n:"Banana",p:2},{n:"Sonho de Valsa",p:3},
    {n:"Leite Condensado",p:3},{n:"Nutella",p:4}
  ],
  bebidas:[
    {n:"Cassulinha 200ml",p:3},{n:"Coca-Cola 600ml",p:8},
    {n:"Coca-Cola 2L",p:16},{n:"Refri Lata",p:6},
    {n:"Refrigerante 2L",p:12},{n:"Cerveja Lata 350ml",p:6},
    {n:"Achocolatado 200ml",p:3}
  ]
};

/* ================= START ================= */
function start(){
  document.getElementById("splash").style.display="none";
  document.getElementById("app").style.display="block";
  renderAll();
  updateOpenStatus();
}

/* ================= STATUS ================= */
function updateOpenStatus(){
  const open = isOpen();
  document.getElementById("closedBanner").style.display = open ? "none" : "block";
  document.querySelectorAll(".btn-add").forEach(b=>b.disabled=!open);
}

/* ================= TABS ================= */
function openTab(id,el){
  currentTab = id;
  document.querySelectorAll(".tab").forEach(t=>t.classList.remove("active"));
  el.classList.add("active");
  document.querySelectorAll(".box").forEach(b=>b.classList.remove("active"));
  document.getElementById(id).classList.add("active");
}

/* ================= RENDER ================= */
function renderAll(){
  renderCategory("lanches",products.lanches,products.adicionaisLanches);
  renderCategory("porcoes",products.porcoes);
  renderCategory("pasteis",products.pasteis);
  renderAcai();
  renderCategory("bebidas",products.bebidas);
  renderAdmin();
}

function renderCategory(id,list,extra){
  const box=document.getElementById(id);
  box.innerHTML="";
  list.forEach(p=>box.innerHTML+=itemHTML(p));
  if(extra){
    box.innerHTML+="<div class='section'>‚ûï Adicionais</div>";
    extra.forEach(p=>box.innerHTML+=itemHTML(p));
  }
}

function renderAcai(){
  const box=document.getElementById("acai");
  box.innerHTML="<div class='section'>ü•§ Tamanhos</div>";
  products.acaiTamanhos.forEach(p=>box.innerHTML+=itemHTML(p));
  box.innerHTML+="<div class='section'>üç´ Adicionais</div>";
  products.acaiAdicionais.forEach(p=>box.innerHTML+=itemHTML(p));
}

function getPrice(p){
  const offer=offers[p.n];
  if(offer && new Date(offer.end)>=new Date()) return offer.price;
  return p.p;
}

function itemHTML(p){
  const offer=offers[p.n];
  let priceHTML = "R$ "+getPrice(p).toFixed(2).replace(".",",");
  if(offer && new Date(offer.end)>=new Date()){
    priceHTML = `<s>R$ ${p.p.toFixed(2).replace(".",",")}</s><br><b>${priceHTML}</b>`;
  }
  return `
    <div class="item">
      <span class="item-name">${p.n}</span>
      <span class="item-price">${priceHTML}</span>
      <button class="btn-add" onclick="addItem('${p.n}',${getPrice(p)})">+</button>
    </div>`;
}

/* ================= BUSCA GLOBAL ================= */
function handleSearch(v){
  v=v.toLowerCase();
  document.querySelectorAll(".item").forEach(i=>{
    i.style.display = i.innerText.toLowerCase().includes(v) ? "grid" : "none";
  });
}

/* ================= CARRINHO ================= */
function addItem(n,p){
  cart.push({n,p});
  updateCart();
}

function updateCart(){
  const box=document.getElementById("cartItems");
  box.innerHTML="";
  let total=0;
  cart.forEach((i,idx)=>{
    total+=i.p;
    box.innerHTML+=`
      <div class="cart-item">
        <span>${i.n}</span>
        <button onclick="removeItem(${idx})">‚úï</button>
      </div>`;
  });
  if(isDelivery) total+=FREIGHT;
  document.getElementById("total").innerText="Total: R$ "+total.toFixed(2).replace(".",",");
  document.getElementById("cart").style.display=cart.length?"block":"none";
}

function removeItem(i){
  cart.splice(i,1);
  updateCart();
}

function setDelivery(v){
  isDelivery=v;
  document.getElementById("address").style.display=v?"block":"none";
  updateCart();
}
</script>
<script>
/* ================= ADM ================= */
function openAdmin(){
  document.getElementById("adminModal").style.display="flex";
}

function closeAdmin(){
  document.getElementById("adminModal").style.display="none";
}

/* Abre ADM digitando "oferta" */
document.getElementById("search").addEventListener("keyup",e=>{
  if(e.target.value.toLowerCase()==="oferta"){
    const senha=prompt("Senha do administrador:");
    if(senha==="1234"){ // ALTERE AQUI SUA SENHA
      openAdmin();
      e.target.value="";
    }else{
      alert("Senha incorreta");
    }
  }
});

/* ================= RENDER ADM ================= */
function renderAdmin(){
  const box=document.getElementById("adminList");
  box.innerHTML="";
  Object.values(products).flat().forEach(p=>{
    if(!p.n) return;
    box.innerHTML+=`
      <div style="margin-bottom:12px">
        <strong>${p.n}</strong>
        <input class="input" placeholder="Pre√ßo oferta"
          id="price-${p.n}">
        <input class="input" type="date"
          id="date-${p.n}">
        <button class="finish" style="margin-top:6px"
          onclick="saveOffer('${p.n}',${p.p})">
          OK
        </button>
      </div>
    `;
  });
}

/* ================= SALVAR OFERTA ================= */
function saveOffer(name,original){
  const price=document.getElementById("price-"+name).value;
  const date=document.getElementById("date-"+name).value;
  if(!price || !date){
    alert("Informe pre√ßo e data");
    return;
  }
  offers[name]={
    price:parseFloat(price),
    end:date
  };
  localStorage.setItem("offers",JSON.stringify(offers));
  alert("Oferta salva");
  renderAll();
}

/* ================= FINALIZAR PEDIDO ================= */
function tryFinishOrder(){
  const hasLanche = cart.some(i=>products.lanches.some(l=>l.n===i.n));
  const hasDrink = cart.some(i=>products.bebidas.some(b=>b.n===i.n));

  if(hasLanche && !hasDrink){
    document.getElementById("drinkModal").style.display="flex";
  }else{
    finishOrder();
  }
}

function openDrinks(){
  document.getElementById("drinkModal").style.display="none";
  openTab("bebidas",document.querySelector(".tab:last-child"));
}

function skipDrinks(){
  document.getElementById("drinkModal").style.display="none";
  finishOrder();
}

/* ================= WHATSAPP ================= */
function finishOrder(){
  const name=document.getElementById("name").value;
  const pay=document.getElementById("payment").value;
  const addr=document.getElementById("address").value;

  if(!name || !pay || (isDelivery && !addr)){
    alert("Preencha todos os dados");
    return;
  }

  let msg="üçî Pedido Rabika's Burguer\n\n";
  msg+="Cliente: "+name+"\n";
  msg+="Pagamento: "+pay+"\n";
  msg+=isDelivery?"Entrega\nEndere√ßo: "+addr+"\n\n":"Retirada\n\n";

  let total=0;
  cart.forEach(i=>{
    msg+="- "+i.n+" R$ "+i.p.toFixed(2).replace(".",",")+"\n";
    total+=i.p;
  });

  if(isDelivery){ total+=FREIGHT; msg+="Entrega: R$ 8,00\n"; }

  msg+="\nTotal: R$ "+total.toFixed(2).replace(".",",");

  window.open("https://wa.me/554991789706?text="+encodeURIComponent(msg));
}

/* ================= OFFLINE ================= */
window.addEventListener("offline",()=>alert("Sem internet"));
</script>

</body>
</html>
