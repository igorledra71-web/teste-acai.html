<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>Rabika's Burguer</title>

<meta name="viewport"
content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">

<style>
*{box-sizing:border-box;margin:0;padding:0}
html,body{height:100%}

body{
 font-family:'Poppins',sans-serif;
 background:linear-gradient(180deg,#06003a,#0a045a,#03001f);
 color:#fff;
 display:flex;
 justify-content:center;
 -webkit-tap-highlight-color:transparent;
}

/* ================= SPLASH ================= */
#splash{
 position:fixed;
 inset:0;
 background:linear-gradient(180deg,#05002e,#020018);
 display:flex;
 align-items:center;
 justify-content:center;
 z-index:9999;
}

.splash-box{
 display:flex;
 flex-direction:column;
 align-items:center;
 justify-content:center;
 text-align:center;
 gap:42px;
 width:100%;
 padding:20px;
}

.splash-logo{
 width:85%;
 max-width:360px;
}

.splash-btn{
 background:linear-gradient(135deg,#FFD34D,#FFB000);
 border:none;
 padding:18px 64px;
 border-radius:44px;
 font-size:22px;
 font-weight:900;
 color:#2b0033;
 cursor:pointer;
}

/* ================= APP ================= */
#app{
 width:100%;
 max-width:420px;
 display:none;
 flex-direction:column;
 padding:14px 14px 340px;
}

/* TOPO */
.title{
 text-align:center;
 font-size:30px;
 font-weight:900;
 color:#FFD34D;
 margin-bottom:8px;
}

#closedBanner{
 background:#b00020;
 padding:12px;
 border-radius:18px;
 font-size:14px;
 font-weight:700;
 text-align:center;
 margin-bottom:10px;
 display:none;
}

/* BUSCA */
.search{
 width:100%;
 padding:14px 16px;
 border-radius:22px;
 border:none;
 font-size:15px;
 margin-bottom:12px;
}

/* TABS */
.tabs{
 display:grid;
 grid-template-columns:repeat(3,1fr);
 gap:10px;
 margin-bottom:14px;
}

.tab{
 background:#fff;
 color:#2b0033;
 padding:14px 8px;
 border-radius:22px;
 font-weight:800;
 text-align:center;
 cursor:pointer;
 font-size:14px;
}

.tab.active{
 background:#FFD34D;
}

/* BOX */
.box{
 background:#fff;
 color:#2b0033;
 border-radius:28px;
 padding:18px;
 margin-bottom:18px;
 display:none;
}

.box.active{display:block}

.section{
 font-weight:900;
 color:#5a0070;
 margin:18px 0 10px;
 font-size:14px;
 text-align:center;
}

/* ITEM */
.item{
 display:grid;
 grid-template-columns:1fr auto auto;
 gap:10px;
 padding:12px 0;
 border-bottom:1px dashed #ddd;
 align-items:center;
}

.item-name{font-weight:600}

.item-price{
 font-weight:900;
 color:#5a0070;
 text-align:right;
}

.old{
 text-decoration:line-through;
 color:#999;
 font-size:12px;
}

.offer-badge{
 background:#ff0033;
 color:#fff;
 padding:2px 6px;
 font-size:10px;
 border-radius:8px;
 margin-left:6px;
}

.btn-add{
 background:#5a0070;
 color:#fff;
 border:none;
 border-radius:14px;
 padding:6px 14px;
 font-weight:900;
 cursor:pointer;
}

/* ================= CARRINHO ================= */
#cart{
 position:fixed;
 bottom:0;
 left:50%;
 transform:translateX(-50%);
 width:100%;
 max-width:420px;
 background:#fff;
 color:#2b0033;
 padding:18px;
 border-radius:28px 28px 0 0;
 display:none;
 box-shadow:0 -20px 40px rgba(0,0,0,.4);
}

.cart-item{
 font-size:14px;
 font-weight:700;
 margin-bottom:8px;
}

.cart-item strong{
 color:#5a0070;
}

.total{
 font-size:18px;
 font-weight:900;
 text-align:right;
 margin-top:10px;
}

.finish{
 background:#25D366;
 color:#fff;
 padding:14px;
 border-radius:24px;
 font-weight:900;
 text-align:center;
 margin-top:12px;
 cursor:pointer;
}

/* ================= MODAL ================= */
.modal{
 position:fixed;
 inset:0;
 background:rgba(0,0,0,.6);
 display:none;
 align-items:center;
 justify-content:center;
 z-index:10000;
}

.modal-box{
 background:#fff;
 color:#2b0033;
 width:92%;
 max-width:400px;
 border-radius:26px;
 padding:20px;
 max-height:90vh;
 overflow:auto;
}

.modal-title{
 font-weight:900;
 margin-bottom:10px;
 color:#5a0070;
 text-align:center;
}
</style>
</head>

<body>

<!-- ================= SPLASH ================= -->
<div id="splash">
 <div class="splash-box">
  <img src="logo.png" class="splash-logo">
  <button class="splash-btn" onclick="start()">FAZER PEDIDO</button>
 </div>
</div>

<!-- ================= APP ================= -->
<div id="app">
 <div class="title">Rabika's Burguer</div>
 <div id="closedBanner">üî¥ Estamos fechados ‚Äî Ter√ßa a Domingo das 18:30 √†s 22:30</div>

 <input id="search" class="search" placeholder="Pesquisar no card√°pio...">

 <div class="tabs">
  <div class="tab active" onclick="openTab('lanches',this)">üçî Lanches</div>
  <div class="tab" onclick="openTab('porcoes',this)">üçü Por√ß√µes</div>
  <div class="tab" onclick="openTab('pasteis',this)">ü•ü Past√©is</div>
  <div class="tab" onclick="openTab('acai',this)">üç® A√ßa√≠</div>
  <div class="tab" onclick="openTab('bebidas',this)">ü•§ Bebidas</div>
 </div>

 <div id="lanches" class="box active"></div>
 <div id="porcoes" class="box"></div>
 <div id="pasteis" class="box"></div>
 <div id="acai" class="box"></div>
 <div id="bebidas" class="box"></div>
</div>
<!-- ================= CARRINHO ================= -->
<div id="cart">
  <div id="cartItems"></div>

  <div style="display:flex;justify-content:space-around;margin:10px 0;font-weight:700">
    <label>
      <input type="radio" name="del" checked onclick="setDelivery(false)">
      Retirada
    </label>
    <label>
      <input type="radio" name="del" onclick="setDelivery(true)">
      Entrega (+R$8)
    </label>
  </div>

  <input id="name" class="search" placeholder="Seu nome">

  <input id="address" class="search" placeholder="Endere√ßo"
         style="display:none">

  <select id="payment" class="search">
    <option value="">Forma de pagamento</option>
    <option>Dinheiro</option>
    <option>Pix</option>
    <option>Cart√£o de Cr√©dito</option>
    <option>Cart√£o de D√©bito</option>
  </select>

  <div id="total" class="total">Total: R$ 0,00</div>

  <div class="finish" onclick="tryFinishOrder()">
    Finalizar Pedido
  </div>
</div>

<!-- ================= MODAL FECHADO ================= -->
<div id="closedModal" class="modal">
  <div class="modal-box">
    <div class="modal-title">üî¥ Estamos fechados</div>
    <p style="text-align:center;font-size:14px">
      Atendimento:<br>
      <strong>Ter√ßa a Domingo</strong><br>
      <strong>18:30 √†s 22:30</strong>
    </p>
    <div class="finish" onclick="closeClosedModal()">Entendi</div>
  </div>
</div>

<!-- ================= MODAL BEBIDAS ================= -->
<div id="drinkModal" class="modal">
  <div class="modal-box">
    <div class="modal-title">ü•§ Vai querer bebida?</div>
    <p style="text-align:center;font-size:14px;margin-bottom:10px">
      Voc√™ adicionou um lanche.<br>
      Deseja adicionar bebidas ao pedido?
    </p>

    <div class="finish" onclick="openDrinks()">SIM</div>
    <div class="finish"
         style="background:#ccc;color:#333"
         onclick="skipDrinks()">N√ÉO</div>
  </div>
</div>

<!-- ================= MODAL ADMIN OFERTAS ================= -->
<div id="adminModal" class="modal">
  <div class="modal-box">
    <div class="modal-title">Painel de Ofertas</div>

    <p style="text-align:center;font-size:13px;margin-bottom:12px">
      Defina o per√≠odo da oferta e o pre√ßo promocional
    </p>

    <div id="adminList">
      <!-- preenchido via JavaScript -->
    </div>

    <div class="finish"
         style="background:#999"
         onclick="closeAdmin()">Fechar</div>
  </div>
</div>

<!-- ================= MODAL ADMIN PRE√áOS / PRODUTOS ================= -->
<div id="priceAdminModal" class="modal">
  <div class="modal-box">
    <div class="modal-title">Painel de Pre√ßos & Card√°pio</div>

    <p style="text-align:center;font-size:13px;margin-bottom:12px">
      Altere pre√ßos, oculte produtos ou adicione novos itens ao card√°pio
    </p>

    <div id="priceAdminList">
      <!-- preenchido via JavaScript -->
    </div>

    <hr style="margin:16px 0">

    <div class="modal-title" style="font-size:16px">‚ûï Novo Produto</div>

    <input id="newName" class="search" placeholder="Nome do produto">
    <input id="newPrice" class="search" type="number" placeholder="Pre√ßo">

    <select id="newCategory" class="search">
      <option value="">Categoria</option>
      <option value="lanches">Lanches</option>
      <option value="adicionaisLanches">Adicionais de Lanches</option>
      <option value="porcoes">Por√ß√µes</option>
      <option value="pasteis">Past√©is</option>
      <option value="acaiTamanhos">A√ßa√≠ - Tamanhos</option>
      <option value="acaiAdicionais">A√ßa√≠ - Adicionais</option>
      <option value="bebidas">Bebidas</option>
    </select>

    <div class="finish" onclick="addNewProduct()">Adicionar Produto</div>

    <div class="finish"
         style="background:#999"
         onclick="closePriceAdmin()">Fechar</div>
  </div>
</div>

<!-- ================= CONFIRMA DESATIVAR OFERTA ================= -->
<div id="confirmDisableModal" class="modal">
  <div class="modal-box">
    <div class="modal-title">Desativar oferta?</div>
    <p style="text-align:center;font-size:14px">
      Tem certeza que deseja desativar esta oferta agora?
    </p>

    <div class="finish" onclick="confirmDisableOffer()">SIM</div>
    <div class="finish"
         style="background:#ccc;color:#333"
         onclick="closeDisableConfirm()">Cancelar</div>
  </div>
</div>
<script>
/* ================= CONFIG ================= */
const FREIGHT = 8;
const ADMIN_PASSWORD = "1234";

let isDelivery = false;
let cart = [];
let currentTab = "lanches";

let offers = JSON.parse(localStorage.getItem("offers")) || {};
let sales = JSON.parse(localStorage.getItem("sales")) || {};

// produtos ativos/inativos
let productStatus = JSON.parse(localStorage.getItem("productStatus")) || {};

// produtos customizados (pre√ßos alterados)
let customPrices = JSON.parse(localStorage.getItem("customPrices")) || {};

// novos produtos adicionados
let extraProducts = JSON.parse(localStorage.getItem("extraProducts")) || {};

/* ================= HOR√ÅRIO ================= */
function isOpen(){
  const d = new Date();
  const day = d.getDay();
  const h = d.getHours() + d.getMinutes()/60;
  if(day === 1) return false;
  if(h < 18.5 || h > 22.5) return false;
  return true;
}

/* ================= PRODUTOS BASE ================= */
const products = {
  lanches:[
    {n:"X-Salada",p:17},{n:"X-Burguer",p:14},{n:"X-Frango",p:22},
    {n:"X-Frango Cremoso",p:20},{n:"X-Bacon",p:25},{n:"X-Calabresa",p:25},
    {n:"X-Cora√ß√£o",p:27},{n:"X-Tudo",p:32},{n:"X-Burguer Duplo",p:22},
    {n:"X-Egg",p:20},{n:"X-Tribom",p:32},{n:"X-Da Casa",p:45},{n:"X-Dog",p:20}
  ],
  adicionaisLanches:[
    {n:"Calabresa",p:7},{n:"Bacon",p:7},{n:"Cora√ß√£o",p:8},
    {n:"Ovo",p:3},{n:"Salsicha",p:4},{n:"Frango",p:7},
    {n:"Cheddar",p:4},{n:"Hamb√∫rguer artesanal",p:10},{n:"Maionese caseira",p:2}
  ],
  porcoes:[
    {n:"Fritas c/ Frango",p:39.99},{n:"Fritas",p:24.99},
    {n:"Fritas c/ Calabresa",p:34.99},{n:"Fritas c/ Bacon",p:34.99},
    {n:"An√©is de Cebola",p:24.99},
    {n:"Fritas c/ Bacon, Calabresa e Queijo",p:39.99},
    {n:"Fritas c/ Bacon Cheddar",p:39.99},
    {n:"Fritas c/ Polenta e Frango",p:39.99},
    {n:"Fritas c/ Polenta",p:24.99},
    {n:"Fritas c/ Calabresa e Catupiry",p:35.99},
    {n:"Fritas, Polenta, Chuleta e Anel de Cebola",p:49.99}
  ],
  pasteis:[
    {n:"Pastel de Carne",p:14},{n:"Pastel de Frango",p:12},
    {n:"Frango Bacon Cheddar",p:16},{n:"Bacon Cheddar",p:15},
    {n:"Calabresa c/ Cebola",p:14},{n:"Carne e Queijo",p:15},
    {n:"Queijo",p:14},{n:"Chocolate ao Leite",p:15},
    {n:"Banana Queijo Canela",p:15},{n:"Romeu e Julieta",p:15},
    {n:"Chocolate Branco",p:15},{n:"Creme e Ouro Branco",p:15},
    {n:"Creme e Sonho de Valsa",p:15}
  ],
  acaiTamanhos:[
    {n:"A√ßa√≠ 300ml",p:12},{n:"A√ßa√≠ 400ml",p:15},{n:"A√ßa√≠ 500ml",p:18}
  ],
  acaiAdicionais:[
    {n:"Pa√ßoca",p:2},{n:"Leite em p√≥",p:4},{n:"Granola",p:4},
    {n:"Morango",p:4},{n:"M&M",p:3},{n:"Ouro Branco",p:3},
    {n:"Banana",p:2},{n:"Sonho de Valsa",p:3},
    {n:"Leite Condensado",p:3},{n:"Nutella",p:4}
  ],
  bebidas:[
    {n:"Cassulinha 200ml",p:3},{n:"Coca-Cola 600ml",p:8},
    {n:"Coca-Cola 2L",p:16},{n:"Refri Lata",p:6},
    {n:"Refrigerante 2L",p:12},{n:"Cerveja Lata 350ml",p:6},
    {n:"Achocolatado 200ml",p:3}
  ]
};

/* ================= START ================= */
function start(){
  document.getElementById("splash").style.display="none";
  document.getElementById("app").style.display="flex";
  renderAll();
  updateOpenStatus();
}

/* ================= STATUS ================= */
function updateOpenStatus(){
  document.getElementById("closedBanner").style.display = isOpen() ? "none" : "block";
}

/* ================= TABS ================= */
function openTab(id,el){
  currentTab = id;
  document.querySelectorAll(".tab").forEach(t=>t.classList.remove("active"));
  el.classList.add("active");
  document.querySelectorAll(".box").forEach(b=>b.classList.remove("active"));
  document.getElementById(id).classList.add("active");
}

/* ================= BUSCA + COMANDOS SECRETOS ================= */
document.getElementById("search").addEventListener("input",e=>{
  const v = e.target.value.toLowerCase().trim();

  if(v === "oferta"){
    const s = prompt("Senha do administrador:");
    if(s === ADMIN_PASSWORD) openAdmin();
    e.target.value = "";
    return;
  }

  if(v === "pre√ßo"){
    const s = prompt("Senha do administrador:");
    if(s === ADMIN_PASSWORD) openPriceAdmin();
    e.target.value = "";
    return;
  }

  if(v === ""){
    document.querySelectorAll(".item").forEach(i=>i.style.display="grid");
    return;
  }

  document.querySelectorAll(".item").forEach(i=>{
    i.style.display = i.dataset.name.includes(v) ? "grid" : "none";
  });
});

/* ================= RENDER ================= */
function getAllProducts(){
  let all = JSON.parse(JSON.stringify(products));
  Object.keys(extraProducts).forEach(cat=>{
    all[cat] = all[cat].concat(extraProducts[cat]);
  });
  return all;
}

function renderAll(){
  const all = getAllProducts();
  renderCategory("lanches", all.lanches, all.adicionaisLanches);
  renderCategory("porcoes", all.porcoes);
  renderCategory("pasteis", all.pasteis);
  renderAcai(all);
  renderCategory("bebidas", all.bebidas);
  renderAdmin();
  renderPriceAdmin();
}

function getPrice(p){
  return customPrices[p.n] ?? p.p;
}

function renderCategory(id,list,extra){
  const box = document.getElementById(id);
  box.innerHTML = "";
  list.forEach(p=>{
    if(productStatus[p.n] === false) return;
    const price = getPrice(p);
    box.innerHTML += `
      <div class="item" data-name="${p.n.toLowerCase()}">
        <span class="item-name">${p.n}</span>
        <span class="item-price">R$ ${price.toFixed(2).replace(".",",")}</span>
        <button class="btn-add" onclick="addItem('${p.n}',${price})">+</button>
      </div>`;
  });
  if(extra){
    box.innerHTML += `<div class="section">‚ûï Adicionais</div>`;
    extra.forEach(p=>{
      if(productStatus[p.n] === false) return;
      const price = getPrice(p);
      box.innerHTML += `
        <div class="item" data-name="${p.n.toLowerCase()}">
          <span class="item-name">${p.n}</span>
          <span class="item-price">R$ ${price.toFixed(2).replace(".",",")}</span>
          <button class="btn-add" onclick="addItem('${p.n}',${price})">+</button>
        </div>`;
    });
  }
}

function renderAcai(all){
  const box = document.getElementById("acai");
  box.innerHTML = `<div class="section">ü•§ Tamanhos</div>`;
  all.acaiTamanhos.forEach(p=>{
    if(productStatus[p.n] === false) return;
    const price = getPrice(p);
    box.innerHTML += `
      <div class="item" data-name="${p.n.toLowerCase()}">
        <span class="item-name">${p.n}</span>
        <span class="item-price">R$ ${price.toFixed(2).replace(".",",")}</span>
        <button class="btn-add" onclick="addItem('${p.n}',${price})">+</button>
      </div>`;
  });
  box.innerHTML += `<div class="section">üç´ Adicionais</div>`;
  all.acaiAdicionais.forEach(p=>{
    if(productStatus[p.n] === false) return;
    const price = getPrice(p);
    box.innerHTML += `
      <div class="item" data-name="${p.n.toLowerCase()}">
        <span class="item-name">${p.n}</span>
        <span class="item-price">R$ ${price.toFixed(2).replace(".",",")}</span>
        <button class="btn-add" onclick="addItem('${p.n}',${price})">+</button>
      </div>`;
  });
}

/* ================= CARRINHO ================= */
function addItem(n,p){
  if(!isOpen()){
    document.getElementById("closedModal").style.display="flex";
    return;
  }
  cart.push({n,p});
  updateCart();
}

function updateCart(){
  const box = document.getElementById("cartItems");
  box.innerHTML = "";
  let total = 0;

  cart.forEach((i,idx)=>{
    total += i.p;
    box.innerHTML += `
      <div class="cart-item">
        <strong>${i.n}</strong> ‚Äî R$ ${i.p.toFixed(2).replace(".",",")}
        <button onclick="removeItem(${idx})">‚úï</button>
      </div>`;
  });

  if(isDelivery) total += FREIGHT;
  document.getElementById("total").innerText =
    "Total: R$ " + total.toFixed(2).replace(".",",");

  document.getElementById("cart").style.display = cart.length ? "block" : "none";
}

function removeItem(i){
  cart.splice(i,1);
  updateCart();
}

function setDelivery(v){
  isDelivery = v;
  document.getElementById("address").style.display = v ? "block" : "none";
  updateCart();
}

/* ================= ADMIN OFERTAS ================= */
function openAdmin(){
  document.getElementById("adminModal").style.display="flex";
}
function closeAdmin(){
  document.getElementById("adminModal").style.display="none";
}

/* ================= ADMIN PRE√áOS ================= */
function openPriceAdmin(){
  document.getElementById("priceAdminModal").style.display="flex";
}
function closePriceAdmin(){
  document.getElementById("priceAdminModal").style.display="none";
}

function renderPriceAdmin(){
  const box = document.getElementById("priceAdminList");
  box.innerHTML = "";
  const all = getAllProducts();

  Object.keys(all).forEach(cat=>{
    all[cat].forEach(p=>{
      box.innerHTML += `
        <div style="margin-bottom:14px">
          <strong>${p.n}</strong>

          <input class="search" type="number"
            value="${getPrice(p)}"
            onchange="updatePrice('${p.n}',this.value)">

          <label style="font-size:13px">
            <input type="checkbox"
              ${productStatus[p.n]===false?"":"checked"}
              onchange="toggleProduct('${p.n}',this.checked)">
            Produto ativo
          </label>
        </div>`;
    });
  });
}

function updatePrice(name,val){
  customPrices[name] = parseFloat(val);
  localStorage.setItem("customPrices",JSON.stringify(customPrices));
  renderAll();
}

function toggleProduct(name,state){
  productStatus[name] = state;
  localStorage.setItem("productStatus",JSON.stringify(productStatus));
  renderAll();
}

function addNewProduct(){
  const n = document.getElementById("newName").value;
  const p = parseFloat(document.getElementById("newPrice").value);
  const c = document.getElementById("newCategory").value;

  if(!n||!p||!c){
    alert("Preencha todos os campos");
    return;
  }

  extraProducts[c] = extraProducts[c] || [];
  extraProducts[c].push({n,p});
  localStorage.setItem("extraProducts",JSON.stringify(extraProducts));

  document.getElementById("newName").value="";
  document.getElementById("newPrice").value="";
  document.getElementById("newCategory").value="";

  renderAll();
}

/* ================= FECHAR MODAL AO CLICAR FORA ================= */
document.querySelectorAll(".modal").forEach(m=>{
  m.addEventListener("click",e=>{
    if(e.target===m) m.style.display="none";
  });
});
</script>
<script>
/* ================= BEBIDA SIM / N√ÉO ================= */
function tryFinishOrder(){
  const temLanche = cart.some(i =>
    products.lanches.some(l => l.n === i.n)
  );
  const temBebida = cart.some(i =>
    products.bebidas.some(b => b.n === i.n)
  );

  if(temLanche && !temBebida){
    document.getElementById("drinkModal").style.display = "flex";
  }else{
    finishOrder();
  }
}

function openDrinks(){
  document.getElementById("drinkModal").style.display = "none";
  const btn = [...document.querySelectorAll(".tab")]
    .find(t => t.innerText.includes("Bebidas"));
  if(btn) openTab("bebidas", btn);
}

function skipDrinks(){
  document.getElementById("drinkModal").style.display = "none";
  finishOrder();
}

/* ================= RELAT√ìRIO ================= */
function gerarRelatorio(){
  const salesArr = Array.isArray(sales) ? sales : [];
  if(!salesArr.length){
    alert("Nenhuma venda registrada");
    return;
  }

  let total=0,dinheiro=0,pix=0,credito=0,debito=0;

  salesArr.forEach(s=>{
    total += s.total;
    if(s.pay === "Dinheiro") dinheiro += s.total;
    if(s.pay === "Pix") pix += s.total;
    if(s.pay === "Cart√£o de Cr√©dito") credito += s.total;
    if(s.pay === "Cart√£o de D√©bito") debito += s.total;
  });

  alert(
    "üìä RELAT√ìRIO DE VENDAS\n\n"+
    "Total: R$ "+total.toFixed(2)+"\n"+
    "Dinheiro: R$ "+dinheiro.toFixed(2)+"\n"+
    "Pix: R$ "+pix.toFixed(2)+"\n"+
    "Cr√©dito: R$ "+credito.toFixed(2)+"\n"+
    "D√©bito: R$ "+debito.toFixed(2)
  );
}

/* ================= FINALIZAR PEDIDO ================= */
function finishOrder(){
  if(!isOpen()){
    document.getElementById("closedModal").style.display="flex";
    return;
  }

  const name = document.getElementById("name").value;
  const pay  = document.getElementById("payment").value;
  const addr = document.getElementById("address").value;

  if(!name || !pay || (isDelivery && !addr)){
    alert("Preencha todos os dados");
    return;
  }

  let msg = "üçî Pedido Rabika's Burguer\n\n";
  msg += "Cliente: " + name + "\n";
  msg += "Pagamento: " + pay + "\n";
  msg += isDelivery
    ? "Entrega\nEndere√ßo: " + addr + "\n\n"
    : "Retirada no local\n\n";

  let total = 0;
  cart.forEach(i=>{
    msg += "- " + i.n + " R$ " + i.p.toFixed(2).replace(".",",") + "\n";
    total += i.p;
  });

  if(isDelivery){
    total += FREIGHT;
    msg += "Entrega: R$ 8,00\n";
  }

  msg += "\nTotal: R$ " + total.toFixed(2).replace(".",",");

  /* SALVA VENDA */
  sales.push({
    date: new Date().toISOString(),
    total,
    pay
  });
  localStorage.setItem("sales", JSON.stringify(sales));

  /* ENVIA WHATSAPP */
  window.open(
    "https://wa.me/554991789706?text=" + encodeURIComponent(msg),
    "_blank"
  );

  /* LIMPA PEDIDO */
  cart = [];
  updateCart();
  document.getElementById("name").value = "";
  document.getElementById("address").value = "";
  document.getElementById("payment").value = "";
}

/* ================= FECHAR MODAIS AO CLICAR FORA ================= */
document.querySelectorAll(".modal").forEach(m=>{
  m.addEventListener("click",e=>{
    if(e.target === m) m.style.display = "none";
  });
});
</script>

</body>
</html>
