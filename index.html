<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>Rabika's Burguer</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">

<style>
*{box-sizing:border-box;margin:0;padding:0}
body{
  font-family:'Poppins',sans-serif;
  background:linear-gradient(180deg,#06003a,#0a045a,#03001f);
  color:#fff;
  display:flex;
  justify-content:center;
}

/* SPLASH */
#splash{
  position:fixed;inset:0;
  background:linear-gradient(180deg,#05002e,#020018);
  display:flex;align-items:center;justify-content:center;
  z-index:9999;
}
.splash-box{text-align:center}
.splash-logo{width:85vw;max-width:360px;margin-bottom:30px}
.splash-btn{
  background:linear-gradient(135deg,#FFD34D,#FFB000);
  border:none;padding:18px 50px;border-radius:50px;
  font-size:22px;font-weight:900;color:#2b0033;
}

/* APP */
#app{width:100%;max-width:420px;padding:16px 16px 340px;display:none}
.title{text-align:center;font-size:32px;font-weight:900;color:#FFD34D;margin-bottom:10px}

#closedBanner{
  background:#b00020;color:#fff;text-align:center;
  padding:12px;border-radius:20px;font-weight:600;margin-bottom:12px
}

.search{
  width:100%;padding:14px 18px;border-radius:24px;
  border:none;font-size:15px;margin-bottom:14px
}

/* TABS */
.tabs{
  display:grid;grid-template-columns:repeat(3,1fr);
  gap:10px;margin-bottom:16px
}
.tab{
  background:#fff;color:#2b0033;
  padding:14px;border-radius:22px;
  font-weight:800;text-align:center
}
.tab.active{background:#FFD34D}

/* CONTENT */
.box{
  background:#fff;color:#2b0033;
  border-radius:28px;padding:18px;
  margin-bottom:20px;display:none
}
.box.active{display:block}

/* ITEM */
.item{
  display:grid;
  grid-template-columns:1fr auto auto;
  gap:10px;padding:14px 0;
  border-bottom:1px dashed #ddd;
  align-items:center
}
.item:last-child{border:none}
.item-name{font-weight:600}
.item-price{font-weight:900;color:#5a0070}
.btn-add{
  background:#5a0070;color:#fff;
  border:none;border-radius:14px;
  padding:6px 14px;font-weight:900
}

/* CART */
#cart{
  position:fixed;bottom:0;left:50%;
  transform:translateX(-50%);
  width:100%;max-width:420px;
  background:#fff;color:#2b0033;
  padding:18px;border-radius:28px 28px 0 0;
  display:none
}
.cart-item{
  display:flex;justify-content:space-between;
  font-weight:700;margin-bottom:6px
}
.total{font-size:18px;font-weight:900;text-align:right}
.finish{
  background:#25D366;color:#fff;
  padding:16px;border-radius:26px;
  font-weight:900;text-align:center;margin-top:12px
}

/* MODAL PADR√ÉO */
.modal{
  position:fixed;inset:0;
  background:rgba(0,0,0,.6);
  display:none;align-items:center;justify-content:center;
  z-index:99999
}
.modal-box{
  background:#fff;color:#2b0033;
  width:94%;max-width:420px;
  border-radius:30px;padding:22px;
  max-height:90vh;overflow:auto;
  position:relative
}
.modal-close{
  position:absolute;top:14px;right:16px;
  font-size:26px;font-weight:900;color:#5a0070
}
.modal-title{
  font-size:22px;font-weight:900;
  text-align:center;margin-bottom:14px
}
</style>
</head>

<body>

<!-- SPLASH -->
<div id="splash">
  <div class="splash-box">
    <img src="logo.png" class="splash-logo">
    <button class="splash-btn" onclick="start()">FAZER PEDIDO</button>
  </div>
</div>

<!-- APP -->
<div id="app">
  <div class="title">Rabika's Burguer</div>
  <div id="closedBanner">üî¥ Estamos fechados ‚Äî Ter√ßa a Domingo das 18:30 √†s 22:30</div>

  <input class="search" placeholder="Pesquisar no card√°pio..." oninput="handleSearch(this.value)">

  <div class="tabs">
    <div class="tab active" onclick="openTab('lanches',this)">üçî Lanches</div>
    <div class="tab" onclick="openTab('porcoes',this)">üçü Por√ß√µes</div>
    <div class="tab" onclick="openTab('pasteis',this)">ü•ü Past√©is</div>
    <div class="tab" onclick="openTab('acai',this)">üç® A√ßa√≠</div>
    <div class="tab" onclick="openTab('bebidas',this)">ü•§ Bebidas</div>
  </div>

  <div id="lanches" class="box active"></div>
  <div id="porcoes" class="box"></div>
  <div id="pasteis" class="box"></div>
  <div id="acai" class="box"></div>
  <div id="bebidas" class="box"></div>
</div>

<!-- CARRINHO -->
<div id="cart">
  <div id="cartItems"></div>
  <div class="total" id="total">Total: R$ 0,00</div>
  <div class="finish" onclick="finishOrder()">Finalizar Pedido</div>
</div>

<!-- PAINEL PRE√áOS -->
<div id="pricePanel" class="modal">
  <div class="modal-box">
    <div class="modal-close" onclick="closePricePanel()">‚úï</div>
    <div class="modal-title">Painel de Pre√ßos & Card√°pio</div>

    <div style="display:flex;gap:10px;margin-bottom:14px">
      <button onclick="toggleHiddenList()">Produtos Ocultos</button>
      <button onclick="toggleNewProduct()">+ Novo Produto</button>
    </div>

    <div id="priceList"></div>
    <div id="hiddenList" style="display:none"></div>
    <div id="newProductBox" style="display:none"></div>
  </div>
</div>

<!-- PAINEL OFERTAS -->
<div id="offerPanel" class="modal">
  <div class="modal-box">
    <div class="modal-close" onclick="closeOfferPanel()">‚úï</div>
    <div class="modal-title">Painel de Ofertas</div>
    <div id="offerList"></div>
  </div>
</div>
<script>
/* =========================
   ESTADO GLOBAL
========================= */
let cart = [];
let searchText = '';
const ADM_PASSWORD = '1234';

/* =========================
   PRODUTOS (TODOS)
========================= */
let produtos = [
  // LANCHES
  {id:'L01',nome:'X-Salada',preco:17,categoria:'lanches',ativo:true},
  {id:'L02',nome:'X-Burguer',preco:14,categoria:'lanches',ativo:true},
  {id:'L03',nome:'X-Frango',preco:22,categoria:'lanches',ativo:true},
  {id:'L04',nome:'X-Frango Cremoso',preco:20,categoria:'lanches',ativo:true},
  {id:'L05',nome:'X-Bacon',preco:25,categoria:'lanches',ativo:true},
  {id:'L06',nome:'X-Calabresa',preco:25,categoria:'lanches',ativo:true},
  {id:'L07',nome:'X-Cora√ß√£o',preco:27,categoria:'lanches',ativo:true},
  {id:'L08',nome:'X-Tudo',preco:32,categoria:'lanches',ativo:true},
  {id:'L09',nome:'X-Burguer Duplo',preco:22,categoria:'lanches',ativo:true},
  {id:'L10',nome:'X-Egg',preco:20,categoria:'lanches',ativo:true},
  {id:'L11',nome:'X-Tribom',preco:32,categoria:'lanches',ativo:true},
  {id:'L12',nome:'X-Da Casa',preco:45,categoria:'lanches',ativo:true},
  {id:'L13',nome:'X-Dog',preco:20,categoria:'lanches',ativo:true},

  // POR√á√ïES
  {id:'P01',nome:'Fritas',preco:15,categoria:'porcoes',ativo:true},
  {id:'P02',nome:'Fritas c/ Bacon',preco:22,categoria:'porcoes',ativo:true},
  {id:'P03',nome:'Fritas c/ Bacon Cheddar',preco:25,categoria:'porcoes',ativo:true},
  {id:'P04',nome:'Fritas c/ Calabresa',preco:23,categoria:'porcoes',ativo:true},
  {id:'P05',nome:'Fritas c/ Polenta',preco:20,categoria:'porcoes',ativo:true},

  // PAST√âIS
  {id:'PA01',nome:'Pastel de Carne',preco:8,categoria:'pasteis',ativo:true},
  {id:'PA02',nome:'Pastel de Frango',preco:8,categoria:'pasteis',ativo:true},
  {id:'PA03',nome:'Pastel Bacon Cheddar',preco:10,categoria:'pasteis',ativo:true},
  {id:'PA04',nome:'Pastel Calabresa c/ Cebola',preco:9,categoria:'pasteis',ativo:true},
  {id:'PA05',nome:'Pastel Carne e Queijo',preco:10,categoria:'pasteis',ativo:true},

  // A√áA√ç
  {id:'A01',nome:'A√ßa√≠ 300ml',preco:12,categoria:'acai',ativo:true},
  {id:'A02',nome:'A√ßa√≠ 500ml',preco:16,categoria:'acai',ativo:true},
  {id:'A03',nome:'A√ßa√≠ 700ml',preco:20,categoria:'acai',ativo:true},

  // BEBIDAS
  {id:'B01',nome:'Cassulinha 200ml',preco:3,categoria:'bebidas',ativo:true},
  {id:'B02',nome:'Coca-Cola 600ml',preco:8,categoria:'bebidas',ativo:true},
  {id:'B03',nome:'Coca-Cola 2L',preco:16,categoria:'bebidas',ativo:true},
  {id:'B04',nome:'Refrigerante Lata',preco:6,categoria:'bebidas',ativo:true},
  {id:'B05',nome:'Refrigerante 2L',preco:12,categoria:'bebidas',ativo:true},
  {id:'B06',nome:'Cerveja Lata 350ml',preco:6,categoria:'bebidas',ativo:true},
  {id:'B07',nome:'Achocolatado 200ml',preco:3,categoria:'bebidas',ativo:true},
];

/* =========================
   INICIALIZA√á√ÉO
========================= */
function start(){
  document.getElementById('splash').style.display='none';
  document.getElementById('app').style.display='block';
  renderAll();
}

/* =========================
   TABS
========================= */
function openTab(cat,el){
  document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));
  el.classList.add('active');
  document.querySelectorAll('.box').forEach(b=>b.classList.remove('active'));
  document.getElementById(cat).classList.add('active');
  renderAll();
}

/* =========================
   BUSCA GLOBAL
========================= */
function handleSearch(v){
  searchText = v.toLowerCase().trim();

  if(searchText === 'pre√ßo' || searchText === 'preco'){
    const s = prompt('Senha ADM');
    if(s === ADM_PASSWORD) openPricePanel();
    return;
  }

  if(searchText === 'ofertas'){
    const s = prompt('Senha ADM');
    if(s === ADM_PASSWORD) openOfferPanel();
    return;
  }

  renderAll();
}

/* =========================
   RENDERIZA√á√ÉO
========================= */
function renderAll(){
  ['lanches','porcoes','pasteis','acai','bebidas'].forEach(cat=>{
    const box = document.getElementById(cat);
    box.innerHTML='';
    produtos
      .filter(p=>p.categoria===cat && p.ativo)
      .filter(p=>p.nome.toLowerCase().includes(searchText))
      .forEach(p=>{
        box.innerHTML+=`
        <div class="item">
          <div class="item-name">${p.nome}</div>
          <div class="item-price">R$ ${p.preco},00</div>
          <button class="btn-add" onclick="addToCart('${p.id}')">+</button>
        </div>`;
      });
  });
}

/* =========================
   CARRINHO
========================= */
function addToCart(id){
  const p = produtos.find(x=>x.id===id);
  cart.push(p);
  updateCart();
}

function updateCart(){
  const box = document.getElementById('cart');
  const list = document.getElementById('cartItems');
  list.innerHTML='';
  let total=0;

  cart.forEach(p=>{
    total+=p.preco;
    list.innerHTML+=`
      <div class="cart-item">
        <span>${p.nome}</span>
        <span>R$ ${p.preco},00</span>
      </div>`;
  });

  document.getElementById('total').innerText=`Total: R$ ${total},00`;
  box.style.display = cart.length ? 'block':'none';
}
/* =========================
   PAINEL DE PRE√áOS
========================= */
function openPricePanel(){
  document.getElementById('pricePanel').style.display='flex';
  renderPricePanel();
}
function closePricePanel(){
  document.getElementById('pricePanel').style.display='none';
}

function toggleHiddenList(){
  document.getElementById('hiddenList').style.display='block';
  document.getElementById('newProductBox').style.display='none';
}
function toggleNewProduct(){
  document.getElementById('newProductBox').style.display='block';
  document.getElementById('hiddenList').style.display='none';
}

/* =========================
   RENDER PAINEL PRE√áOS
========================= */
function renderPricePanel(){
  const list = document.getElementById('priceList');
  const hidden = document.getElementById('hiddenList');
  const novo = document.getElementById('newProductBox');

  list.innerHTML = '<h3>Produtos Ativos</h3>';
  hidden.innerHTML = '<h3 style="color:#b00020">Produtos Ocultos</h3>';

  produtos.forEach(p=>{
    if(p.ativo){
      list.innerHTML += `
        <div class="item">
          <div>${p.nome}</div>
          <input type="number" value="${p.preco}" 
            onchange="p.preco=this.value">
          <button onclick="savePrice('${p.id}')">Salvar</button>
          <button onclick="hideProduct('${p.id}')">Ocultar</button>
        </div>`;
    } else {
      hidden.innerHTML += `
        <div class="item">
          <div>${p.nome}</div>
          <button onclick="showProduct('${p.id}')">Reativar</button>
        </div>`;
    }
  });

  novo.innerHTML = `
    <h3>Novo Produto</h3>
    <input id="newName" placeholder="Nome do produto">
    <input id="newPrice" placeholder="Pre√ßo" type="number">
    <select id="newCat">
      <option value="lanches">Lanches</option>
      <option value="porcoes">Por√ß√µes</option>
      <option value="pasteis">Past√©is</option>
      <option value="acai">A√ßa√≠</option>
      <option value="bebidas">Bebidas</option>
    </select>
    <button onclick="addNewProduct()">Adicionar Produto</button>
  `;
}

/* =========================
   A√á√ïES PRE√áOS
========================= */
function savePrice(id){
  alert('Pre√ßo atualizado com sucesso');
  renderAll();
}

function hideProduct(id){
  const p = produtos.find(x=>x.id===id);
  p.ativo = false;
  alert('Produto ocultado com sucesso');
  renderPricePanel();
  renderAll();
}

function showProduct(id){
  const p = produtos.find(x=>x.id===id);
  p.ativo = true;
  alert('Produto reativado');
  renderPricePanel();
  renderAll();
}

function addNewProduct(){
  const nome = document.getElementById('newName').value;
  const preco = Number(document.getElementById('newPrice').value);
  const cat = document.getElementById('newCat').value;
  if(!nome || !preco) return alert('Preencha todos os campos');

  produtos.push({
    id:'N'+Date.now(),
    nome,preco,categoria:cat,ativo:true
  });

  alert('Produto adicionado');
  renderPricePanel();
  renderAll();
}

/* =========================
   FINALIZAR PEDIDO
========================= */
function finishOrder(){
  if(cart.length===0) return;
  let msg = 'Pedido:%0A';
  cart.forEach(p=>msg+=`- ${p.nome} R$ ${p.preco},00%0A`);
  window.open(`https://wa.me/55SEUNUMERO?text=${msg}`);
}
/* =========================
   PAINEL DE OFERTAS
========================= */
function openOfferPanel(){
  document.getElementById('offerPanel').style.display='flex';
  renderOfferPanel();
}
function closeOfferPanel(){
  document.getElementById('offerPanel').style.display='none';
}

function renderOfferPanel(){
  const box = document.getElementById('offerList');
  box.innerHTML = '';

  produtos.forEach(p=>{
    if(!p.ativo) return;

    box.innerHTML += `
      <div class="item">
        <strong>${p.nome}</strong>
        <input type="number" placeholder="Pre√ßo oferta"
          value="${p.oferta?.preco||''}"
          onchange="setOfferPrice('${p.id}',this.value)">
        <input type="date"
          value="${p.oferta?.inicio||''}"
          onchange="setOfferStart('${p.id}',this.value)">
        <input type="date"
          value="${p.oferta?.fim||''}"
          onchange="setOfferEnd('${p.id}',this.value)">
        <button onclick="saveOffer('${p.id}')">Salvar Oferta</button>
        ${p.oferta?`<button onclick="removeOffer('${p.id}')">Desativar</button>`:''}
      </div>
    `;
  });
}

function setOfferPrice(id,v){
  const p = produtos.find(x=>x.id===id);
  if(!p.oferta) p.oferta={};
  p.oferta.preco = Number(v);
}
function setOfferStart(id,v){
  const p = produtos.find(x=>x.id===id);
  if(!p.oferta) p.oferta={};
  p.oferta.inicio = v;
}
function setOfferEnd(id,v){
  const p = produtos.find(x=>x.id===id);
  if(!p.oferta) p.oferta={};
  p.oferta.fim = v;
}

function saveOffer(id){
  alert('Oferta salva com sucesso');
  renderAll();
}

function removeOffer(id){
  const p = produtos.find(x=>x.id===id);
  delete p.oferta;
  alert('Oferta desativada');
  renderOfferPanel();
  renderAll();
}

/* =========================
   APLICA OFERTA NO CARD√ÅPIO
========================= */
function getPrice(p){
  if(p.oferta){
    const hoje = new Date().toISOString().split('T')[0];
    if(hoje>=p.oferta.inicio && hoje<=p.oferta.fim){
      return `
        <span style="text-decoration:line-through;color:#999">
          R$ ${p.preco},00
        </span>
        <span style="color:#b00020;font-weight:900">
          R$ ${p.oferta.preco},00 üî•
        </span>`;
    }
  }
  return `R$ ${p.preco},00`;
}

/* =========================
   BLOQUEIO HOR√ÅRIO
========================= */
function checkOpen(){
  const d=new Date();
  const dia=d.getDay();
  const h=d.getHours()+d.getMinutes()/60;
  const aberto = dia!==1 && h>=18.5 && h<=22.5;
  document.querySelectorAll('.btn-add')
    .forEach(b=>b.disabled=!aberto);
}

/* =========================
   BUSCA GLOBAL
========================= */
function handleSearch(v){
  v=v.toLowerCase();
  document.querySelectorAll('.item')
    .forEach(i=>{
      i.style.display =
        i.innerText.toLowerCase().includes(v)
        ?'grid':'none';
    });

  if(v==='pre√ßo'){
    const s = prompt('Senha painel');
    if(s===ADMIN_PASS) openPricePanel();
  }
  if(v==='ofertas'){
    const s = prompt('Senha painel');
    if(s===ADMIN_PASS) openOfferPanel();
  }
}

/* =========================
   HTML FINAL
========================= */
</script>

<!-- PAINEL PRE√áOS -->
<div id="pricePanel" class="modal">
  <div class="modal-box">
    <button onclick="closePricePanel()">‚úñ</button>
    <div id="priceList"></div>
    <button onclick="toggleHiddenList()">Ocultos</button>
    <button onclick="toggleNewProduct()">Novo Produto</button>
    <div id="hiddenList"></div>
    <div id="newProductBox"></div>
  </div>
</div>

<!-- PAINEL OFERTAS -->
<div id="offerPanel" class="modal">
  <div class="modal-box">
    <button onclick="closeOfferPanel()">‚úñ</button>
    <h2>Painel de Ofertas</h2>
    <div id="offerList"></div>
  </div>
</div>

</body>
</html>
